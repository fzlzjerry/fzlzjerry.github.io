---
import Layout from '../../../layouts/Layout.astro';
import { reports } from '../../../data/reports';

export function getStaticPaths() {
  return reports.map(report => ({
    params: { date: report.date.toLowerCase().replace(/[^a-z0-9]+/g, '-') },
    props: { report }
  }));
}

const { report } = Astro.props;

// Generate a description for SEO
const description = `Weekly report for ${report.date} from the BASIS iGEM team. Achievements include: ${report.achievements[0]}...`;
---

<Layout title={`Weekly Report ${report.date} - iGEM - Morax Cheng`} description={description}>
  <div class="space-y-8">
    <header class="space-y-4">
      <a href="/igem/weekly-reports" class="inline-flex items-center gap-2" style="color: var(--text-muted-light); text-decoration: underline; text-decoration-thickness: 1px; text-underline-offset: 0.2em;">
        <i class="fas fa-arrow-left"></i>
        Back to Weekly Reports
      </a>
    </header>

    <article class="border rounded overflow-hidden" style="border-color: var(--border-light);">
      <div class="p-6" style="background-color: var(--accent-light); border-bottom: 1px solid var(--border-light);">
        <div class="flex items-center gap-4">
          <i class="fas fa-file-lines text-2xl" style="color: var(--text-muted-light);"></i>
          <div>
            <time style="color: var(--text-light); font-style: italic;">{report.date}</time>
            <p class="text-sm" style="color: var(--text-muted-light);">By {report.author}</p>
          </div>
        </div>
      </div>

      <div class="p-6 space-y-6" style="background-color: var(--primary-light);">
        <section>
          <h2 class="text-xl mb-4 flex items-center gap-2" style="font-weight: 500; letter-spacing: 0.02em;">
            <i class="fas fa-check-circle font-icon" style="color: var(--text-muted-light);"></i>
            Weekly Achievements
          </h2>
          <ul class="space-y-2">
            {report.achievements.map(achievement => (
              <li class="flex items-start gap-2">
                <i class="fas fa-circle-check mt-1 font-icon" style="color: var(--text-muted-light);"></i>
                <span>{achievement}</span>
              </li>
            ))}
          </ul>
        </section>

        <section>
          <h2 class="text-xl mb-4 flex items-center gap-2" style="font-weight: 500; letter-spacing: 0.02em;">
            <i class="fas fa-rocket font-icon" style="color: var(--text-muted-light);"></i>
            Next Week's Goals
          </h2>
          <ul class="space-y-2">
            {report.nextWeekGoals.map(goal => (
              <li class="flex items-start gap-2">
                <i class="fas fa-arrow-right mt-1 font-icon" style="color: var(--text-muted-light);"></i>
                <span>{goal}</span>
              </li>
            ))}
          </ul>
        </section>
      </div>
    </article>
  </div>
</Layout>

<style>
</style>

<script>
  // Add Font Awesome if not already added
  if (!document.querySelector('link[href*="font-awesome"]')) {
    const link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css';
    document.head.appendChild(link);
  }
</script>