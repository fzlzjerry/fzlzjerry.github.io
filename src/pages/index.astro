---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const allPosts = await getCollection('blog');
const latestPost = allPosts.sort((a, b) => 
  new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
)[0];

const projects = [
  {
    title: 'Windows 12 Web',
    description: 'A web-based Windows 12 concept UI implementation with modern web technologies. Features a realistic Windows-like interface, multiple windows management, and various system apps.',
    tech: ['Html', 'CSS', 'JS'],
    github: 'https://github.com/tjy-gitnub/win12',
    image: '/projects/win12.png',
    featured: true
  },
  {
    title: 'Graphing Calculator',
    description: 'A powerful graphing calculator built with Python and Qt, featuring intuitive UI and advanced mathematical functions.',
    tech: ['Python', 'Qt'],
    github: 'https://github.com/fzlzjerry/graphing_calculator',
    image: '/projects/calculator.png',
    featured: false
  }
];
const latestProject = projects[0];
---

<Layout
  title="Morax Cheng - Student Developer & Economics Enthusiast"
  description="Welcome to Morax Cheng's personal website. Explore projects, blog posts, and learn about a 9th-grade student developer passionate about programming and economics."
>
  <section class="py-20 text-center hero-section">
    <div class="hero-content">
      <h1 class="text-5xl md:text-6xl mb-6 hero-title" style="font-weight: 300; letter-spacing: 0.08em;">
        Hi, I'm Morax <span class="emoji wave-animation">ðŸ‘‹</span>
      </h1>
      <p class="text-xl md:text-2xl mb-8 text-center subtitle-fade" style="color: var(--text-muted-light); font-style: italic;">
        9th Grade Student Developer & Economics Enthusiast
      </p>
      <p class="text-lg max-w-2xl mx-auto description-fade" style="color: var(--text-muted-light); line-height: 1.8;">
        Currently studying at BASIS International School Park Lane Harbour.
        Passionate about programming, economics, and continuous learning.
      </p>
    </div>
  </section>

  <section class="py-10">
    <h2 class="text-2xl md:text-3xl mb-8" style="font-weight: 300; letter-spacing: 0.05em; border-bottom: 2px solid var(--border-light); padding-bottom: 0.75rem;">Latest Updates</h2>
    <div class="grid gap-8">
      {latestProject && (
        <a href="/projects" class="block border-2 rounded-lg p-8 interactive-element transition-all update-card" style="border-color: var(--border-light); background: linear-gradient(to bottom right, var(--primary-light), var(--accent-light));">
          <div class="flex flex-col md:flex-row md:justify-between md:items-start gap-4 mb-4">
            <div class="flex-1">
              <div class="text-xs mb-2 uppercase tracking-wider" style="color: var(--text-muted-light); font-weight: 500;">Featured Project</div>
              <h3 class="text-xl md:text-2xl font-semibold mb-2">{latestProject.title}</h3>
            </div>
            <div class="flex gap-2 flex-wrap">
              {latestProject.tech.map(tech => (
                <span class="unified-tag">
                  {tech}
                </span>
              ))}
            </div>
          </div>
          <p class="text-base md:text-lg" style="color: var(--text-muted-light); text-align: left; line-height: 1.7;">
            {latestProject.description}
          </p>
        </a>
      )}
      {latestPost && (
        <a href={`/blog/${latestPost.slug}`} class="block border-2 rounded-lg p-8 interactive-element transition-all update-card" style="border-color: var(--border-light); background: linear-gradient(to bottom right, var(--primary-light), var(--accent-light));">
          <div class="flex flex-col md:flex-row md:justify-between md:items-start gap-4 mb-4">
            <div class="flex-1">
              <div class="text-xs mb-2 uppercase tracking-wider" style="color: var(--text-muted-light); font-weight: 500;">Latest Blog Post</div>
              <h3 class="text-xl md:text-2xl font-semibold mb-2">{latestPost.data.title}</h3>
            </div>
            <time datetime={latestPost.data.date} class="text-sm md:text-base whitespace-nowrap" style="color: var(--text-muted-light); font-style: italic;">
              {new Date(latestPost.data.date).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
              })}
            </time>
          </div>
          {latestPost.data.excerpt && (
            <p class="text-base md:text-lg mb-4" style="color: var(--text-muted-light); text-align: left; line-height: 1.7;">
              {latestPost.data.excerpt}
            </p>
          )}
          {latestPost.data.tags && (
            <div class="flex flex-wrap gap-2 mt-4">
              {latestPost.data.tags.map(tag => (
                <span class="unified-tag text-xs">
                  #{tag}
                </span>
              ))}
            </div>
          )}
        </a>
      )}
    </div>
  </section>
</Layout>

<style>
  /* Hero animations */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes wave {
    0%, 100% {
      transform: rotate(0deg);
    }
    25% {
      transform: rotate(20deg);
    }
    75% {
      transform: rotate(-20deg);
    }
  }
  
  .hero-section {
    animation: fadeInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .hero-title {
    animation: fadeInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.1s backwards;
  }
  
  .subtitle-fade {
    animation: fadeInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.2s backwards;
  }
  
  .description-fade {
    animation: fadeInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.3s backwards;
  }
  
  .wave-animation {
    display: inline-block;
    animation: wave 2s infinite;
    transform-origin: 70% 70%;
  }
  
  /* Update card enhancements */
  .update-card {
    position: relative;
    overflow: hidden;
  }
  
  .update-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .update-card:hover::before {
    left: 100%;
  }
  
  .update-card:hover {
    border-color: var(--text-muted-light);
  }
</style>
